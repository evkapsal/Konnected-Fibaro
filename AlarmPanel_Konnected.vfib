{"name":"XL-2T","type":"virtual_device","properties":{"deviceIcon":1001,"currentIcon":"1001","log":"Device: Running","logTemp":"TxtGreen","mainLoop":"fibaro:debug(\"starting debug\");\nlocal thisId= fibaro:getSelfId();\nfibaro:debug(\"id:\"..thisId);\nlocal ipaddr= fibaro:getValue(thisId,\"IPAddress\");\nfibaro:debug(\"IP:\"..ipaddr);\nlocal port= fibaro:getValue(thisId, \"TCPPort\");\nfibaro:debug(\"Port:\"..port);\nkonnected= Net.FHttp(ipaddr, port);\nfibaro:log('Device: Running');\n\n\n--Zone1\nzone1response= konnected:GET(\"/device?pin=1\");\nlocal zone1= json.decode(zone1response);\nfibaro:debug(zone1[1].state);\nlocal zone1state = zone1[1].state;\n\n\nif zone1state == 0 then\n  fibaro:call(thisId, \"setProperty\", \"ui.doorId.value\",\"Closed\")\n  fibaro:debug(\"Zone 1 Door is Closed\")\nelseif zone1state == 1 then\n  fibaro:call(thisId, \"setProperty\", \"ui.doorId.value\",\"Opened\")\n  fibaro:debug(\"Zone 1 Door is Opened\")\nend\n\n--Zone2\nzone2response= konnected:GET(\"/device?pin=2\");\nlocal zone2= json.decode(zone2response);\nfibaro:debug(zone2[1].state);\nlocal zone2state = zone2[1].state;\n\nif zone2state == 0 then\n  fibaro:call(thisId, \"setProperty\", \"ui.motionId.value\",\"Idle\")\n  fibaro:debug(\"Zone 2 no motion detected\")\nelseif zone2state == 1 then\n  fibaro:call(thisId, \"setProperty\", \"ui.motionId.value\",\"Detected\")\n  fibaro:debug(\"Zone 2 motion detected\")\nend\n\n--Zone3\nzone3response= konnected:GET(\"/device?pin=5\");\nlocal zone3= json.decode(zone3response);\nfibaro:debug(zone3[1].state);\nlocal zone3state = zone3[1].state;\n\nif zone3state == 0 then\n  fibaro:call(thisId, \"setProperty\", \"ui.balconyId.value\",\"Closed\")\n  fibaro:debug(\"Zone 3 Balcony Door is Closed\")\nelseif zone3state == 1 then\n  fibaro:call(thisId, \"setProperty\", \"ui.balconyId.value\",\"Opened\")\n  fibaro:debug(\"Zone 3 Balcony Door is Opened\")\nend\n\n--Zone4\nzone4response= konnected:GET(\"/device?pin=6\");\nlocal zone4= json.decode(zone4response);\nfibaro:debug(zone4[1].state);\nlocal zone4state = zone4[1].state;\n\nif zone4state == 0 then\n  fibaro:call(thisId, \"setProperty\", \"ui.kitchedId.value\",\"Closed\")\n  fibaro:debug(\"Zone 4 Kitchen Door is Closed\")\nelseif zone4state == 1 then\n  fibaro:call(thisId, \"setProperty\", \"ui.kitchedId.value\",\"Opened\")\n  fibaro:debug(\"Zone 4 Kitchen Door is Opened\")\nend\n\n--Zone5\nzone5response= konnected:GET(\"/device?pin=7\");\nlocal zone5= json.decode(zone5response);\nfibaro:debug(zone5[1].state);\nlocal zone5state = zone5[1].state;\n\nif zone5state == 0 then\n  fibaro:call(thisId, \"setProperty\", \"ui.bedId.value\",\"Closed\")\n  fibaro:debug(\"Zone 5 Bedroom Door is Closed\")\nelseif zone5state == 1 then\n  fibaro:call(thisId, \"setProperty\", \"ui.bedId.value\",\"Opened\")\n  fibaro:debug(\"Zone 5 Bedroom Door is Opened\")\nend\n\n--Zone6\nzone6response= konnected:GET(\"/device?pin=9\");\nlocal zone6= json.decode(zone6response);\nfibaro:debug(zone6[1].state);\nlocal zone6state = zone6[1].state;\n\nif zone6state == 0 then\n  fibaro:call(thisId, \"setProperty\", \"ui.winId.value\",\"Closed\")\n  fibaro:debug(\"Zone 6 WC Window is Closed\")\nelseif zone6state == 1 then\n  fibaro:call(thisId, \"setProperty\", \"ui.winId.value\",\"Opened\")\n  fibaro:debug(\"Zone 6 WC Window is Opened\")\nend\n\nfibaro:sleep(3000);","ui.balconyId.value":"Closed","ui.bedId.value":"Closed","ui.doorId.value":"Closed","ui.kitchedId.value":"Closed","ui.motionId.value":"Idle","ui.winId.value":"Closed","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"Door","name":"doorId","favourite":false,"main":false}]},{"type":"label","elements":[{"id":2,"lua":false,"waitForResponse":false,"caption":"Motion","name":"motionId","favourite":false,"main":false}]},{"type":"label","elements":[{"id":3,"lua":false,"waitForResponse":false,"caption":"Balcony","name":"balconyId","favourite":false,"main":false}]},{"type":"label","elements":[{"id":4,"lua":false,"waitForResponse":false,"caption":"Kitchen","name":"kitchedId","favourite":false,"main":false}]},{"type":"label","elements":[{"id":5,"lua":false,"waitForResponse":false,"caption":"Bedrooms","name":"bedId","favourite":false,"main":false}]},{"type":"label","elements":[{"id":6,"lua":false,"waitForResponse":false,"caption":"WC Window","name":"winId","favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}
